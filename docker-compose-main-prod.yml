version: '3.8'

services:
  mc-admin-ui:
    build: ./admin-ui
    container_name: mc-admin-ui
    ports:
      - "3000:3000"
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock  # To interact with Docker
      - ./mc-ilias/datapacks:/app/mc-ilias/datapacks  # Access to mc-ilias datapacks
      - ./mc-niilo/datapacks:/app/mc-niilo/datapacks  # Access to mc-niilo datapacks
      - ./bgstpoelten-mc-landing/datapacks:/app/bgstpoelten/datapacks
      - ./htlstp-mc-landing/datapacks:/app/htlstp/datapacks
      - ./borgstpoelten-mc-landing/datapacks:/app/borgstpoelten/datapacks
      - ./hakstpoelten-mc-landing/datapacks:/app/hakstpoelten/datapacks
      - ./basop-bafep-stp-mc-landing/datapacks:/app/basopbafepstp/datapacks
      - ./play-mc-landing/datapacks:/app/play/datapacks
    environment:
      - NODE_ENV=production
      - ADMIN_USER=${ADMIN_USER:-admin}
      - ADMIN_PASS=${ADMIN_PASS:-admin123}
    restart: unless-stopped
    networks:
      - minecraft-net

  mc-borgstpoelten:
    build: ./general-server
    container_name: mc-borgstpoelten
    environment:
      - EULA=TRUE
      - VERSION=1.21.10
      - MEMORY=5G
      - MAX_MEMORY=100G
      - TYPE=VANILLA
      - ONLINE_MODE=false
      - ENABLE_PROXY_CONNECTIONS=true
      - MOTD=BORGST Pöllten Server
    volumes:
      - ./borgstpoelten-mc-landing/data:/data
      - ./borgstpoelten-mc-landing/datapacks:/data/datapacks
    restart: unless-stopped
    networks:
      - minecraft-net
    expose:
      - "25565"

  mc-bgstpoelten:
    build: ./general-server
    container_name: mc-bgstpoelten
    environment:
      - EULA=TRUE
      - VERSION=1.21.10
      - MEMORY=5G
      - MAX_MEMORY=100G
      - TYPE=VANILLA
      - ONLINE_MODE=false
      - ENABLE_PROXY_CONNECTIONS=true
      - MOTD=BGST Pölten Server
    volumes:
      - ./bgstpoelten-mc-landing/data:/data
      - ./bgstpoelten-mc-landing/datapacks:/data/datapacks
    restart: unless-stopped
    networks:
      - minecraft-net
    expose:
      - "25565"

  mc-htlstp:
    build: ./general-server
    container_name: mc-htlstp
    environment:
      - EULA=TRUE
      - VERSION=1.21.10
      - MEMORY=5G
      - MAX_MEMORY=100G
      - TYPE=VANILLA
      - ONLINE_MODE=false
      - ENABLE_PROXY_CONNECTIONS=true
      - MOTD=HTL St. Pölten Server
    volumes:
      - ./htlstp-mc-landing/data:/data
      - ./htlstp-mc-landing/datapacks:/data/datapacks
    restart: unless-stopped
    networks:
      - minecraft-net
    expose:
      - "25565"

  mc-hakstpoelten:
    build: ./general-server
    container_name: mc-hakstpoelten
    environment:
      - EULA=TRUE
      - VERSION=1.21.10
      - MEMORY=5G
      - MAX_MEMORY=100G
      - TYPE=VANILLA
      - ONLINE_MODE=false
      - ENABLE_PROXY_CONNECTIONS=true
      - MOTD=HAK St. Pölten Server
    volumes:
      - ./hakstpoelten-mc-landing/data:/data
      - ./hakstpoelten-mc-landing/datapacks:/data/datapacks
    restart: unless-stopped
    networks:
      - minecraft-net
    expose:
      - "25565"

  mc-basop-bafep-stp:
    build: ./general-server
    container_name: mc-basop-bafep-stp
    environment:
      - EULA=TRUE
      - VERSION=1.21.10
      - MEMORY=5G
      - MAX_MEMORY=100G
      - TYPE=VANILLA
      - ONLINE_MODE=false
      - ENABLE_PROXY_CONNECTIONS=true
      - MOTD=BASOP/BAFEP St. Pölten Server
    volumes:
      - ./basop-bafep-stp-mc-landing/data:/data
      - ./basop-bafep-stp-mc-landing/datapacks:/data/datapacks
    restart: unless-stopped
    networks:
      - minecraft-net
    expose:
      - "25565"

  mc-play:
    build: ./general-server
    container_name: mc-play
    environment:
      - EULA=TRUE
      - VERSION=1.21.10
      - MEMORY=5G
      - MAX_MEMORY=100G
      - TYPE=VANILLA
      - ONLINE_MODE=false
      - ENABLE_PROXY_CONNECTIONS=true
      - MOTD=Playground Server
    volumes:
      - ./play-mc-landing/data:/data
      - ./play-mc-landing/datapacks:/data/datapacks
    restart: unless-stopped
    networks:
      - minecraft-net
    expose:
      - "25565"

networks:
  minecraft-net:
    driver: bridge