version: '3.8'

services:
  school-server:
    image: your-registry/mc-server/school-server:prod-v1.0
    container_name: school-server
    environment:
      - EULA=TRUE
      - VERSION=1.21.10
      - MEMORY=5G
      - MAX_MEMORY=100G
      - TYPE=VANILLA
      - ONLINE_MODE=false
      - ENABLE_PROXY_CONNECTIONS=true
      - MOTD=School Server
    volumes:
      - ./school/data:/data
      - ./school/datapacks:/data/datapacks  # Datapacks volume
    restart: unless-stopped
    networks:
      - school_net
    expose:
      - "25565"
    # No external port mapping since this would be handled by proxy if needed

networks:
  school_net:
    driver: bridge