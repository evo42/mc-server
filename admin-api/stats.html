<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minecraft Server - Lerncraft Stats</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #1a2a6c);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
            color: white;
            min-height: 100vh;
            padding: 20px;
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px 20px;
            background: linear-gradient(145deg, rgba(0, 0, 0, 0.4), rgba(20, 20, 30, 0.4));
            border-radius: 15px;
            backdrop-filter: blur(10px);
            box-shadow:
                0 8px 32px rgba(0, 0, 0, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(100, 150, 200, 0.2);
            position: relative;
            overflow: hidden;
            transition: transform 0.3s ease;
        }

        header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg,
                transparent 40%,
                rgba(52, 152, 219, 0.1) 50%,
                transparent 60%);
            z-index: -1;
        }

        header:hover {
            transform: translateY(-3px);
            box-shadow:
                0 15px 35px rgba(0, 0, 0, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
        }

        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
        }

        .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .servers-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }

        .server-card {
            background: linear-gradient(145deg, rgba(30, 30, 40, 0.7), rgba(20, 20, 30, 0.7));
            border-radius: 15px;
            padding: 25px;
            box-shadow:
                0 8px 32px rgba(0, 0, 0, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(100, 150, 200, 0.3);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .server-card::before {
            content: '';
            position: absolute;
            top: -1px;
            left: -1px;
            right: -1px;
            bottom: -1px;
            background: linear-gradient(45deg, rgba(52, 152, 219, 0.3), rgba(155, 89, 182, 0.3), rgba(46, 204, 113, 0.3), rgba(241, 196, 15, 0.3));
            z-index: -1;
            border-radius: 16px;
            opacity: 0.5;
        }

        .server-card:hover {
            transform: translateY(-5px);
            box-shadow:
                0 15px 50px rgba(52, 152, 219, 0.4),
                0 12px 40px rgba(0, 0, 0, 0.4);
        }

        .server-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid rgba(255, 255, 255, 0.2);
        }

        .server-name {
            font-size: 1.8em;
            font-weight: bold;
        }

        .status {
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 1.1em;
        }

        .status.running {
            background-color: #2ecc71;
            color: white;
        }

        .status.stopped {
            background-color: #e74c3c;
            color: white;
        }

        .status-label {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .status-indicator {
            display: inline-block;
            width: 14px;
            height: 14px;
            border-radius: 50%;
            box-shadow:
                inset 0 1px 2px rgba(0, 0, 0, 0.3),
                0 1px 2px rgba(0, 0, 0, 0.2);
        }

        .status-indicator.running {
            background: linear-gradient(145deg, #2ecc71, #27ae60);
            box-shadow:
                inset 0 1px 2px rgba(0, 0, 0, 0.3),
                0 0 10px rgba(46, 204, 113, 0.5);
        }

        .status-indicator.stopped {
            background: linear-gradient(145deg, #e74c3c, #c0392b);
            box-shadow:
                inset 0 1px 2px rgba(0, 0, 0, 0.3),
                0 0 8px rgba(231, 76, 60, 0.4);
        }

        .server-info {
            margin: 15px 0;
        }

        .info-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .info-label {
            font-weight: 600;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 15px 0;
        }

        .stat-box {
            background: linear-gradient(145deg, rgba(255, 255, 255, 0.15), rgba(200, 200, 200, 0.05));
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            box-shadow:
                inset 0 1px 0 rgba(255, 255, 255, 0.1),
                0 2px 4px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .stat-box:hover {
            transform: translateY(-2px);
            box-shadow:
                inset 0 1px 0 rgba(255, 255, 255, 0.15),
                0 5px 15px rgba(0, 0, 0, 0.2);
            background: linear-gradient(145deg, rgba(255, 255, 255, 0.2), rgba(200, 200, 200, 0.1));
        }

        .stat-value {
            font-size: 1.5em;
            font-weight: bold;
            margin-top: 5px;
        }

        .chart-container {
            margin: 25px 0;
            height: 300px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 15px;
            /* Add 3D depth effect */
            box-shadow:
                inset 0 1px 0 rgba(255, 255, 255, 0.2),
                inset 0 -1px 0 rgba(0, 0, 0, 0.5),
                0 8px 16px rgba(0, 0, 0, 0.3),
                0 0 20px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
            overflow: hidden;
            /* Subtle 3D effect using depth */
            transform: translateZ(0);
            -webkit-transform: translateZ(0);
        }

        .chart-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 30%;
            background: linear-gradient(to bottom,
                rgba(255, 255, 255, 0.15),
                rgba(255, 255, 255, 0.05));
            border-radius: 10px 10px 0 0;
            pointer-events: none;
        }

        .chart-container::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 20%;
            background: linear-gradient(to top,
                rgba(0, 0, 0, 0.4),
                rgba(0, 0, 0, 0.1));
            border-radius: 0 0 10px 10px;
            pointer-events: none;
        }

        .chart-title {
            text-align: center;
            margin-bottom: 10px;
            font-size: 1.2em;
            /* Add 3D effect to title */
            text-shadow:
                0 1px 0 rgba(255, 255, 255, 0.2),
                0 2px 2px rgba(0, 0, 0, 0.5),
                0 0 10px rgba(255, 255, 255, 0.3);
            font-weight: bold;
            position: relative;
            z-index: 2;
        }


        .admin-section {
            background: rgba(0, 0, 0, 0.6);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 30px;
        }

        .section-title {
            font-size: 1.8em;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid rgba(255, 255, 255, 0.2);
        }

        .datapack-item {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            margin: 5px 0;
        }

        .players-section {
            margin-top: 20px;
        }

        .players-title {
            font-size: 1.3em;
            margin-bottom: 10px;
            color: #3498db;
        }

        .players-list {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .player-tag {
            background: linear-gradient(145deg, rgba(52, 152, 219, 0.4), rgba(41, 128, 185, 0.3));
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.9em;
            border: 1px solid rgba(52, 152, 219, 0.5);
            box-shadow:
                inset 0 1px 0 rgba(255, 255, 255, 0.2),
                0 1px 2px rgba(0, 0, 0, 0.1);
            transition: all 0.2s ease;
            display: inline-block;
            margin: 3px;
        }

        .player-tag:hover {
            transform: translateY(-1px);
            box-shadow:
                inset 0 1px 0 rgba(255, 255, 255, 0.2),
                0 3px 6px rgba(0, 0, 0, 0.2);
            background: linear-gradient(145deg, rgba(52, 152, 219, 0.5), rgba(41, 128, 185, 0.4));
        }

        .no-players {
            color: #95a5a6;
            font-style: italic;
        }

        .last-updated {
            text-align: center;
            margin-top: 20px;
            font-size: 0.9em;
            opacity: 0.7;
        }

        .refresh-btn {
            display: block;
            margin: 30px auto;
            padding: 12px 30px;
            background: rgba(52, 152, 219, 0.3);
            color: white;
            border: 2px solid #3498db;
            border-radius: 30px;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .refresh-btn:hover {
            background: rgba(52, 152, 219, 0.5);
            transform: scale(1.05);
        }

        footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.2);
            font-size: 0.9em;
            opacity: 0.7;
        }

        @media (max-width: 768px) {
            .servers-container {
                grid-template-columns: 1fr;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            h1 {
                font-size: 2em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ðŸŽ® Minecraft Server Status ðŸŽ®</h1>
            <p class="subtitle">Real-time server statistics and player information</p>
        </header>

        <div class="servers-container">
            <div class="server-card">
                <div class="server-header">
                    <div class="server-name"><i class="fas fa-dice-d20"></i> <a href="https://youtube.com/@ikariagames10" style="color: inherit; text-decoration: none;">Ikaria Games</a></div>
                    <div class="status-label">
                        <span class="status-indicator" id="ilias-status-indicator"></span>
                    </div>
                </div>

                <div class="server-info">
                    <div class="info-item">
                        <span class="info-label">Server Type:</span>
                        <span id="ilias-type">Minecraft Java</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Version:</span>
                        <span id="ilias-version">1.21.1</span>
                    </div>
                </div>
                    <div class="info-item">
                        <span class="info-label">Server URL:</span>
                        <span><a href="https://youtube.com/@ikariagames10" style="color: inherit; text-decoration: underline;">youtube.com/@ikariagames10</a></span>
                    </div>

                <div class="stats-grid">
                    <div class="stat-box">
                        <div>Online</div>
                        <div class="stat-value" id="ilias-player-count">0</div>
                    </div>
                    <div class="stat-box">
                        <div>Uptime</div>
                        <div class="stat-value" id="ilias-uptime">N/A</div>
                    </div>
                    <div class="stat-box">
                        <div>CPU Usage</div>
                        <div class="stat-value" id="ilias-cpu">N/A</div>
                    </div>
                    <div class="stat-box">
                        <div>Memory Usage</div>
                        <div class="stat-value" id="ilias-memory">N/A</div>
                    </div>
                </div>

                <div class="chart-container">
                    <div class="chart-title">Performance Last 24 Hours</div>
                    <canvas id="ilias-chart"></canvas>
                </div>

                <div class="players-section">
                    <div class="players-title">Currently Online:</div>
                    <div class="players-list" id="ilias-players">Checking...</div>
                </div>
            </div>

            <div class="server-card">
                <div class="server-header">
                    <div class="server-name"><i class="fas fa-crown"></i> <a href="https://youtube.com/@Melone151" style="color: inherit; text-decoration: none;">KÃ¶nigreich der letzten Krieger</a></div>
                    <div class="status-label">
                        <span class="status-indicator" id="niilo-status-indicator"></span>
                    </div>
                </div>

                <div class="server-info">
                    <div class="info-item">
                        <span class="info-label">Server Type:</span>
                        <span id="niilo-type">Minecraft Java</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Version:</span>
                        <span id="niilo-version">1.21.1</span>
                    </div>
                </div>
                    <div class="info-item">
                        <span class="info-label">Server URL:</span>
                        <span><a href="https://youtube.com/@Melone151" style="color: inherit; text-decoration: underline;">youtube.com/@Melone151</a></span>
                    </div>

                <div class="stats-grid">
                    <div class="stat-box">
                        <div>Online</div>
                        <div class="stat-value" id="niilo-player-count">0</div>
                    </div>
                    <div class="stat-box">
                        <div>Uptime</div>
                        <div class="stat-value" id="niilo-uptime">N/A</div>
                    </div>
                    <div class="stat-box">
                        <div>CPU Usage</div>
                        <div class="stat-value" id="niilo-cpu">N/A</div>
                    </div>
                    <div class="stat-box">
                        <div>Memory Usage</div>
                        <div class="stat-value" id="niilo-memory">N/A</div>
                    </div>
                </div>

                <div class="chart-container">
                    <div class="chart-title">Performance Last 24 Hours</div>
                    <canvas id="niilo-chart"></canvas>
                </div>

                <div class="players-section">
                    <div class="players-title">Currently Online:</div>
                    <div class="players-list" id="niilo-players">Checking...</div>
                </div>
            </div>

            <div class="server-card">
                <div class="server-header">
                    <div class="server-name"><i class="fas fa-school"></i> <a href="/bgstpoelten" style="color: inherit; text-decoration: none;">BGST PÃ¶lten</a></div>
                    <div class="status-label">
                        <span class="status-indicator" id="bgstpoelten-status-indicator"></span>
                    </div>
                </div>

                <div class="server-info">
                    <div class="info-item">
                        <span class="info-label">Server Type:</span>
                        <span id="bgstpoelten-type">Minecraft Java</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Version:</span>
                        <span id="bgstpoelten-version">1.21.1</span>
                    </div>
                </div>
                    <div class="info-item">
                        <span class="info-label">Server URL:</span>
                        <span><a href="/bgstpoelten" style="color: inherit; text-decoration: underline;">lerncraft.xyz/bgstpoelten</a></span>
                    </div>

                <div class="stats-grid">
                    <div class="stat-box">
                        <div>Online</div>
                        <div class="stat-value" id="bgstpoelten-player-count">0</div>
                    </div>
                    <div class="stat-box">
                        <div>Uptime</div>
                        <div class="stat-value" id="bgstpoelten-uptime">N/A</div>
                    </div>
                    <div class="stat-box">
                        <div>CPU Usage</div>
                        <div class="stat-value" id="bgstpoelten-cpu">N/A</div>
                    </div>
                    <div class="stat-box">
                        <div>Memory Usage</div>
                        <div class="stat-value" id="bgstpoelten-memory">N/A</div>
                    </div>
                </div>

                <div class="chart-container">
                    <div class="chart-title">Performance Last 24 Hours</div>
                    <canvas id="bgstpoelten-chart"></canvas>
                </div>

                <div class="players-section">
                    <div class="players-title">Currently Online:</div>
                    <div class="players-list" id="bgstpoelten-players">Checking...</div>
                </div>
            </div>

            <div class="server-card">
                <div class="server-header">
                    <div class="server-name"><i class="fas fa-graduation-cap"></i> <a href="/htlstp" style="color: inherit; text-decoration: none;">HTL St. PÃ¶lten</a></div>
                    <div class="status-label">
                        <span class="status-indicator" id="htlstp-status-indicator"></span>
                    </div>
                </div>

                <div class="server-info">
                    <div class="info-item">
                        <span class="info-label">Server Type:</span>
                        <span id="htlstp-type">Minecraft Java</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Version:</span>
                        <span id="htlstp-version">1.21.1</span>
                    </div>
                </div>
                    <div class="info-item">
                        <span class="info-label">Server URL:</span>
                        <span><a href="/htlstp" style="color: inherit; text-decoration: underline;">lerncraft.xyz/htlstp</a></span>
                    </div>

                <div class="stats-grid">
                    <div class="stat-box">
                        <div>Online</div>
                        <div class="stat-value" id="htlstp-player-count">0</div>
                    </div>
                    <div class="stat-box">
                        <div>Uptime</div>
                        <div class="stat-value" id="htlstp-uptime">N/A</div>
                    </div>
                    <div class="stat-box">
                        <div>CPU Usage</div>
                        <div class="stat-value" id="htlstp-cpu">N/A</div>
                    </div>
                    <div class="stat-box">
                        <div>Memory Usage</div>
                        <div class="stat-value" id="htlstp-memory">N/A</div>
                    </div>
                </div>

                <div class="chart-container">
                    <div class="chart-title">Performance Last 24 Hours</div>
                    <canvas id="htlstp-chart"></canvas>
                </div>

                <div class="players-section">
                    <div class="players-title">Currently Online:</div>
                    <div class="players-list" id="htlstp-players">Checking...</div>
                </div>
            </div>

            <div class="server-card">
                <div class="server-header">
                    <div class="server-name"><i class="fas fa-building"></i> <a href="/borgstpoelten" style="color: inherit; text-decoration: none;">BORG St. PÃ¶lten</a></div>
                    <div class="status-label">
                        <span class="status-indicator" id="borgstpoelten-status-indicator"></span>
                    </div>
                </div>

                <div class="server-info">
                    <div class="info-item">
                        <span class="info-label">Server Type:</span>
                        <span id="borgstpoelten-type">Minecraft Java</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Version:</span>
                        <span id="borgstpoelten-version">1.21.1</span>
                    </div>
                </div>
                    <div class="info-item">
                        <span class="info-label">Server URL:</span>
                        <span><a href="/borgstpoelten" style="color: inherit; text-decoration: underline;">lerncraft.xyz/borgstpoelten</a></span>
                    </div>

                <div class="stats-grid">
                    <div class="stat-box">
                        <div>Online</div>
                        <div class="stat-value" id="borgstpoelten-player-count">0</div>
                    </div>
                    <div class="stat-box">
                        <div>Uptime</div>
                        <div class="stat-value" id="borgstpoelten-uptime">N/A</div>
                    </div>
                    <div class="stat-box">
                        <div>CPU Usage</div>
                        <div class="stat-value" id="borgstpoelten-cpu">N/A</div>
                    </div>
                    <div class="stat-box">
                        <div>Memory Usage</div>
                        <div class="stat-value" id="borgstpoelten-memory">N/A</div>
                    </div>
                </div>

                <div class="chart-container">
                    <div class="chart-title">Performance Last 24 Hours</div>
                    <canvas id="borgstpoelten-chart"></canvas>
                </div>

                <div class="players-section">
                    <div class="players-title">Currently Online:</div>
                    <div class="players-list" id="borgstpoelten-players">Checking...</div>
                </div>
            </div>

            <div class="server-card">
                <div class="server-header">
                    <div class="server-name"><i class="fas fa-balance-scale"></i> <a href="/hakstpoelten" style="color: inherit; text-decoration: none;">HAK St. PÃ¶lten</a></div>
                    <div class="status-label">
                        <span class="status-indicator" id="hakstpoelten-status-indicator"></span>
                    </div>
                </div>

                <div class="server-info">
                    <div class="info-item">
                        <span class="info-label">Server Type:</span>
                        <span id="hakstpoelten-type">Minecraft Java</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Version:</span>
                        <span id="hakstpoelten-version">1.21.1</span>
                    </div>
                </div>
                    <div class="info-item">
                        <span class="info-label">Server URL:</span>
                        <span><a href="/hakstpoelten" style="color: inherit; text-decoration: underline;">lerncraft.xyz/hakstpoelten</a></span>
                    </div>

                <div class="stats-grid">
                    <div class="stat-box">
                        <div>Online</div>
                        <div class="stat-value" id="hakstpoelten-player-count">0</div>
                    </div>
                    <div class="stat-box">
                        <div>Uptime</div>
                        <div class="stat-value" id="hakstpoelten-uptime">N/A</div>
                    </div>
                    <div class="stat-box">
                        <div>CPU Usage</div>
                        <div class="stat-value" id="hakstpoelten-cpu">N/A</div>
                    </div>
                    <div class="stat-box">
                        <div>Memory Usage</div>
                        <div class="stat-value" id="hakstpoelten-memory">N/A</div>
                    </div>
                </div>

                <div class="chart-container">
                    <div class="chart-title">Performance Last 24 Hours</div>
                    <canvas id="hakstpoelten-chart"></canvas>
                </div>

                <div class="players-section">
                    <div class="players-title">Currently Online:</div>
                    <div class="players-list" id="hakstpoelten-players">Checking...</div>
                </div>
            </div>

            <div class="server-card">
                <div class="server-header">
                    <div class="server-name"><i class="fas fa-landmark"></i> <a href="/basop-bafep-stp" style="color: inherit; text-decoration: none;">BASOP/BAFEP St. PÃ¶lten</a></div>
                    <div class="status-label">
                        <span class="status-indicator" id="basopbafepstp-status-indicator"></span>
                    </div>
                </div>

                <div class="server-info">
                    <div class="info-item">
                        <span class="info-label">Server Type:</span>
                        <span id="basopbafepstp-type">Minecraft Java</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Version:</span>
                        <span id="basopbafepstp-version">1.21.1</span>
                    </div>
                </div>

                <div class="stats-grid">
                    <div class="stat-box">
                        <div>Online</div>
                        <div class="stat-value" id="basopbafepstp-player-count">0</div>
                    </div>
                    <div class="stat-box">
                        <div>Uptime</div>
                        <div class="stat-value" id="basopbafepstp-uptime">N/A</div>
                    </div>
                    <div class="stat-box">
                        <div>CPU Usage</div>
                        <div class="stat-value" id="basopbafepstp-cpu">N/A</div>
                    </div>
                    <div class="stat-box">
                        <div>Memory Usage</div>
                        <div class="stat-value" id="basopbafepstp-memory">N/A</div>
                    </div>
                </div>

                <div class="chart-container">
                    <div class="chart-title">Performance Last 24 Hours</div>
                    <canvas id="basopbafepstp-chart"></canvas>
                </div>

                <div class="players-section">
                    <div class="players-title">Currently Online:</div>
                    <div class="players-list" id="basopbafepstp-players">Checking...</div>
                </div>
            </div>

            <div class="server-card">
                <div class="server-header">
                    <div class="server-name"><i class="fas fa-gamepad"></i> <a href="/play" style="color: inherit; text-decoration: none;">Allgemeiner Spielserver</a></div>
                    <div class="status-label">
                        <span class="status-indicator" id="play-status-indicator"></span>
                    </div>
                </div>

                <div class="server-info">
                    <div class="info-item">
                        <span class="info-label">Server Type:</span>
                        <span id="play-type">Minecraft Java</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Version:</span>
                        <span id="play-version">1.21.1</span>
                    </div>
                </div>

                <div class="stats-grid">
                    <div class="stat-box">
                        <div>Online</div>
                        <div class="stat-value" id="play-player-count">0</div>
                    </div>
                    <div class="stat-box">
                        <div>Uptime</div>
                        <div class="stat-value" id="play-uptime">N/A</div>
                    </div>
                    <div class="stat-box">
                        <div>CPU Usage</div>
                        <div class="stat-value" id="play-cpu">N/A</div>
                    </div>
                    <div class="stat-box">
                        <div>Memory Usage</div>
                        <div class="stat-value" id="play-memory">N/A</div>
                    </div>
                </div>

                <div class="chart-container">
                    <div class="chart-title">Performance Last 24 Hours</div>
                    <canvas id="play-chart"></canvas>
                </div>

                <div class="players-section">
                    <div class="players-title">Currently Online:</div>
                    <div class="players-list" id="play-players">Checking...</div>
                </div>
            </div>
        </div>

        <section class="waitlist-section" style="background: rgba(0, 0, 0, 0.6); border-radius: 15px; padding: 25px; margin: 20px 0; box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.1);">
            <div class="section-header" style="text-align: center; margin-bottom: 15px;">
                <h2 style="color: #3498db; font-size: 1.8em; margin-bottom: 10px;">Warteliste</h2>
            </div>
            <div class="waitlist-content" style="text-align: center; font-size: 1.2em; line-height: 1.6; margin-bottom: 20px;">
                <p>25 Schulen mit 25 Anmeldungen erhalten einen <strong>kostenlosen eigenen Minecraft Server</strong></p>
            </div>
            <div class="email-form-container" style="text-align: center; margin-top: 20px;">
                <p>Geben Sie Ihre Schule an, um Interesse zu zeigen:</p>
                <form class="school-email-form" style="margin-top: 15px; display: flex; flex-direction: column; align-items: center;">
                    <input
                        type="email"
                        placeholder="mitmachen@schul-domain.ac.at"
                        style="padding: 12px 20px; margin: 10px 0; border-radius: 30px; border: 1px solid rgba(52, 152, 219, 0.5); background: rgba(255, 255, 255, 0.1); color: white; width: 100%; max-width: 400px; text-align: center;"
                        required
                    >
                    <button
                        type="submit"
                        style="padding: 12px 30px; margin-top: 15px; border-radius: 30px; border: none; background: linear-gradient(45deg, #3498db, #2980b9); color: white; font-weight: bold; cursor: pointer; transition: all 0.3s ease;"
                        onmouseover="this.style.transform='scale(1.05)';"
                        onmouseout="this.style.transform='';"
                    >
                        Absenden
                    </button>
                    <p style="font-size: 0.9em; opacity: 0.8; margin-top: 15px;">Nur die Schul-Domain ist erforderlich und wird zur ZÃ¤hlung des Interesses eingereicht</p>
                </form>
            </div>
        </section>

        <!-- Installed Datapacks Section -->
        <div class="admin-section">
            <h2 class="section-title">Installed Datapacks</h2>
            <div class="dashboard-container">
                <div class="server-card">
                    <div class="server-header">
                        <div class="server-name"><i class="fas fa-dice-d20"></i> Ikaria Games</div>
                    </div>
                    <div id="ilias-datapacks-list">Loading datapacks...</div>
                </div>

                <div class="server-card">
                    <div class="server-header">
                        <div class="server-name"><i class="fas fa-crown"></i> KÃ¶nigreich der letzten Krieger</div>
                    </div>
                    <div id="niilo-datapacks-list">Loading datapacks...</div>
                </div>

                <div class="server-card">
                    <div class="server-header">
                        <div class="server-name"><i class="fas fa-school"></i> BGST PÃ¶lten</div>
                    </div>
                    <div id="bgstpoelten-datapacks-list">Loading datapacks...</div>
                </div>

                <div class="server-card">
                    <div class="server-header">
                        <div class="server-name"><i class="fas fa-graduation-cap"></i> HTL St. PÃ¶lten</div>
                    </div>
                    <div id="htlstp-datapacks-list">Loading datapacks...</div>
                </div>

                <div class="server-card">
                    <div class="server-header">
                        <div class="server-name"><i class="fas fa-building"></i> BORG St. PÃ¶lten</div>
                    </div>
                    <div id="borgstpoelten-datapacks-list">Loading datapacks...</div>
                </div>

                <div class="server-card">
                    <div class="server-header">
                        <div class="server-name"><i class="fas fa-balance-scale"></i> HAK St. PÃ¶lten</div>
                    </div>
                    <div id="hakstpoelten-datapacks-list">Loading datapacks...</div>
                </div>

                <div class="server-card">
                    <div class="server-header">
                        <div class="server-name"><i class="fas fa-landmark"></i> BASOP/BAFEP St. PÃ¶lten</div>
                    </div>
                    <div id="basopbafepstp-datapacks-list">Loading datapacks...</div>
                </div>

                <div class="server-card">
                    <div class="server-header">
                        <div class="server-name"><i class="fas fa-gamepad"></i> Allgemeiner Spielserver</div>
                    </div>
                    <div id="play-datapacks-list">Loading datapacks...</div>
                </div>
            </div>
        </div>

        <button class="refresh-btn" onclick="refreshStats()">ðŸ”„ Refresh Stats</button>
        <div class="last-updated" id="last-updated">Last updated: Just now</div>

        <footer>
            <p>Minecraft Server Statistics Dashboard | Provider: Estonian company K42 Ventures OÃœ</p>
        </footer>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/lines/LineMaterial.js"></script>
    <script>
        // Chart instances
        let iliasChart, niiloChart, bgstpoeltenChart, htlstpChart, borgstpoeltenChart, hakstpoeltenChart, basopbafepstpChart, playChart;

        // Function to update stats
        async function updateStats() {
            try {
                const response = await fetch('/api/public/status/all');
                const data = await response.json();

                // Update mc-ilias stats
                const iliasData = data['mc-ilias'];
                if (iliasData) {
                    updateServerDisplay('ilias', iliasData);
                }

                // Update mc-niilo stats
                const niiloData = data['mc-niilo'];
                if (niiloData) {
                    updateServerDisplay('niilo', niiloData);
                }

                // Update bgstpoelten stats
                const bgstpoeltenData = data['mc-bgstpoelten'];
                if (bgstpoeltenData) {
                    updateServerDisplay('bgstpoelten', bgstpoeltenData);
                }

                // Update htlstp stats
                const htlstpData = data['mc-htlstp'];
                if (htlstpData) {
                    updateServerDisplay('htlstp', htlstpData);
                }

                // Update borgstpoelten stats
                const borgstpoeltenData = data['mc-borgstpoelten'];
                if (borgstpoeltenData) {
                    updateServerDisplay('borgstpoelten', borgstpoeltenData);
                }

                // Update hakstpoelten stats
                const hakstpoeltenData = data['mc-hakstpoelten'];
                if (hakstpoeltenData) {
                    updateServerDisplay('hakstpoelten', hakstpoeltenData);
                }

                // Update basopbafepstp stats
                const basopbafepstpData = data['mc-basop-bafep-stp'];
                if (basopbafepstpData) {
                    updateServerDisplay('basopbafepstp', basopbafepstpData);
                }

                // Update play stats
                const playData = data['mc-play'];
                if (playData) {
                    updateServerDisplay('play', playData);
                }

                // Update "last updated" time
                const now = new Date();
                document.getElementById('last-updated').textContent = `Last updated: ${now.toLocaleTimeString()}`;
            } catch (error) {
                console.error('Error fetching stats:', error);
                document.getElementById('last-updated').textContent = 'Error loading stats';
            }
        }

        function updateServerDisplay(server, data) {
            // Update status indicator
            const statusIndicator = document.getElementById(`${server}-status-indicator`);

            if (statusIndicator) {
                statusIndicator.className = `status-indicator ${data.status.toLowerCase()}`;
            }

            // Update player count
            const playerCount = document.getElementById(`${server}-player-count`);
            if (playerCount) {
                playerCount.textContent = data.playerCount || 0;
            }

            // Update CPU usage
            const cpuElement = document.getElementById(`${server}-cpu`);
            if (cpuElement) {
                cpuElement.textContent = data.cpu || 'N/A';
            }

            // Update memory usage
            const memoryElement = document.getElementById(`${server}-memory`);
            if (memoryElement) {
                memoryElement.textContent = data.memory || 'N/A';
            }

            // Update uptime (for now, just show generic message)
            const uptimeElement = document.getElementById(`${server}-uptime`);
            if (uptimeElement) {
                uptimeElement.textContent = data.status === 'Running' ? 'Active' : 'Offline';
            }

            // Update players list
            const playersList = document.getElementById(`${server}-players`);
            if (playersList) {
                if (data.players && data.players.length > 0) {
                    playersList.innerHTML = '';
                    data.players.forEach(player => {
                        const playerTag = document.createElement('span');
                        playerTag.className = 'player-tag';
                        playerTag.textContent = player;
                        playersList.appendChild(playerTag);
                    });
                } else {
                    playersList.innerHTML = '<span class="no-players">No players online</span>';
                }
            }
        }

        // Function to load and display historical data
        async function loadHistoricalData() {
            try {
                const [iliasHistory, niiloHistory, bgstpoeltenHistory, htlstpHistory, borgstpoeltenHistory, hakstpoeltenHistory, basopbafepstpHistory, playHistory] = await Promise.all([
                    fetch('/api/public/history/mc-ilias').then(r => r.json()).catch(() => []),
                    fetch('/api/public/history/mc-niilo').then(r => r.json()).catch(() => []),
                    fetch('/api/public/history/mc-bgstpoelten').then(r => r.json()).catch(() => []),
                    fetch('/api/public/history/mc-htlstp').then(r => r.json()).catch(() => []),
                    fetch('/api/public/history/mc-borgstpoelten').then(r => r.json()).catch(() => []),
                    fetch('/api/public/history/mc-hakstpoelten').then(r => r.json()).catch(() => []),
                    fetch('/api/public/history/mc-basop-bafep-stp').then(r => r.json()).catch(() => []),
                    fetch('/api/public/history/mc-play').then(r => r.json()).catch(() => [])
                ]);

                // Create/update charts
                createOrUpdateChart('ilias-chart', iliasHistory);
                createOrUpdateChart('niilo-chart', niiloHistory);
                createOrUpdateChart('bgstpoelten-chart', bgstpoeltenHistory);
                createOrUpdateChart('htlstp-chart', htlstpHistory);
                createOrUpdateChart('borgstpoelten-chart', borgstpoeltenHistory);
                createOrUpdateChart('hakstpoelten-chart', hakstpoeltenHistory);
                createOrUpdateChart('basopbafepstp-chart', basopbafepstpHistory);
                createOrUpdateChart('play-chart', playHistory);
            } catch (error) {
                console.error('Error loading historical data:', error);
            }
        }

        // Function to create or update a chart
        function createOrUpdateChart(canvasId, historyData) {
            const ctx = document.getElementById(canvasId).getContext('2d');

            // Process data for chart
            let timestamps = [];
            let playerCounts = [];
            let cpuUsage = [];
            let memoryUsage = [];

            if (historyData && historyData.length > 0) {
                // Sort by timestamp to ensure proper order
                historyData.sort((a, b) => a.timestamp - b.timestamp);

                // Filter data to last 24 hours only
                const now = new Date();
                const twentyFourHoursAgo = new Date(now.getTime() - (24 * 60 * 60 * 1000));

                // Filter and sample data to reduce frequency
                const filteredData = [];
                historyData.forEach(dataPoint => {
                    const dataTime = new Date(dataPoint.timestamp);

                    // Only include data from the last 24 hours
                    if (dataTime >= twentyFourHoursAgo) {
                        filteredData.push(dataPoint);
                    }
                });

                // Sample the data to reduce frequency - keep every nth point
                // Ensure we have between 8 and 24 points for optimal visualization
                const maxPoints = 24;
                const minPoints = 8;
                let samplingRate = 1;

                if (filteredData.length > maxPoints) {
                    samplingRate = Math.ceil(filteredData.length / maxPoints);
                } else if (filteredData.length > minPoints) {
                    samplingRate = Math.ceil(filteredData.length / 16); // Intermediate value
                }

                for (let i = 0; i < filteredData.length; i += samplingRate) {
                    const dataPoint = filteredData[i];
                    const dataTime = new Date(dataPoint.timestamp);

                    // Convert timestamp to human-readable format
                    timestamps.push(dataTime.toLocaleTimeString());

                    // Extract player count
                    playerCounts.push(dataPoint.playerCount || 0);

                    // Extract CPU usage (remove % symbol)
                    let cpu = dataPoint.cpu || '0%';
                    if (typeof cpu === 'string') {
                        cpu = parseFloat(cpu.replace('%', '')) || 0;
                    }
                    cpuUsage.push(cpu);

                    // Extract Memory usage (simplified)
                    let memory = dataPoint.memory || '0GB';
                    // For memory, we'll just extract GB value for simplicity
                    const memoryMatch = memory.match(/([\d.]+)G/);
                    if (memoryMatch) {
                        memory = parseFloat(memoryMatch[1]);
                    } else if (typeof memory === 'string') {
                        // If it's a string like "N/A", set to 0
                        memory = 0;
                    }
                    memoryUsage.push(memory);
                }
            }

            // Destroy existing chart if it exists
            const chartId = canvasId.replace('-chart', '');
            let existingChart;
            switch(chartId) {
                case 'ilias':
                    existingChart = iliasChart;
                    break;
                case 'niilo':
                    existingChart = niiloChart;
                    break;
                case 'bgstpoelten':
                    existingChart = bgstpoeltenChart;
                    break;
                case 'htlstp':
                    existingChart = htlstpChart;
                    break;
                case 'borgstpoelten':
                    existingChart = borgstpoeltenChart;
                    break;
                case 'hakstpoelten':
                    existingChart = hakstpoeltenChart;
                    break;
                case 'basopbafepstp':
                    existingChart = basopbafepstpChart;
                    break;
                case 'play':
                    existingChart = playChart;
                    break;
                default:
                    existingChart = null;
            }
            if (existingChart) {
                existingChart.destroy();
            }

            // Create new chart with 3D effects
            const newChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: timestamps,
                    datasets: [
                        {
                            label: '\uD83C\uDFAE Online', // Gamer controller emoji
                            data: playerCounts,
                            borderColor: 'rgb(54, 162, 235)',
                            backgroundColor: 'rgba(54, 162, 235, 0.2)',
                            yAxisID: 'y',
                            // Remove the line and show as points for the Online metric
                            showLine: false,
                            pointRadius: 6,
                            pointStyle: 'circle',
                            pointBackgroundColor: 'rgba(54, 162, 235, 0.8)',
                            pointBorderColor: 'rgba(255, 255, 255, 0.9)',
                            pointBorderWidth: 2,
                            pointHoverRadius: 8,
                            // Add 3D effect to points
                            borderCapStyle: 'round',
                            borderJoinStyle: 'round'
                        },
                        {
                            label: 'CPU %',
                            data: cpuUsage,
                            borderColor: 'rgb(255, 99, 132)',
                            backgroundColor: 'rgba(255, 99, 132, 0.5)',
                            yAxisID: 'y1',
                            fill: true, // Fill area under line to create heatmap-like effect
                            pointRadius: 0,
                            borderWidth: 4,
                            borderCapStyle: 'round',
                            borderJoinStyle: 'round',
                            // Add 3D effect to line
                            tension: 0.4, // Smoother curves for 3D effect
                        },
                        {
                            label: 'Memory (GB)',
                            data: memoryUsage,
                            borderColor: 'rgb(75, 192, 192)',
                            backgroundColor: 'rgba(75, 192, 192, 0.5)',
                            yAxisID: 'y1',
                            pointRadius: 0,
                            borderWidth: 4,
                            borderCapStyle: 'round',
                            borderJoinStyle: 'round',
                            // Add 3D effect to line
                            tension: 0.4, // Smoother curves for 3D effect
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            labels: {
                                // Add 3D effect to legend text
                                font: {
                                    size: 12,
                                    family: "'Segoe UI', Tahoma, Geneva, Verdana, sans-serif"
                                },
                                // Add text shadow for 3D effect
                                color: 'rgba(255, 255, 255, 0.9)'
                            }
                        },
                        tooltip: {
                            // 3D effect for tooltips
                            backgroundColor: 'rgba(0, 0, 0, 0.8)',
                            titleColor: '#fff',
                            bodyColor: '#fff',
                            borderColor: 'rgba(255, 255, 255, 0.3)',
                            borderWidth: 1,
                            cornerRadius: 8,
                            displayColors: true,
                            padding: 12,
                            boxPadding: 6,
                            // Add shadow for 3D effect
                            xPadding: 15,
                            yPadding: 15,
                            caretSize: 10,
                            caretPadding: 15
                        },
                        // Add 3D-like lighting effect
                        filler: {
                            propagate: false
                        }
                    },
                    scales: {
                        x: {
                            display: true,
                            title: {
                                display: true,
                                text: 'Time',
                                // Add 3D effect to axis title
                                color: 'rgba(255, 255, 255, 0.9)',
                                font: {
                                    size: 12,
                                    weight: 'bold'
                                }
                            },
                            // 3D grid lines
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)',
                                tickColor: 'rgba(255, 255, 255, 0.2)',
                                lineWidth: 1
                            },
                            ticks: {
                                color: 'rgba(255, 255, 255, 0.8)',
                                maxRotation: 45,
                                minRotation: 45
                            }
                        },
                        y: {
                            type: 'linear',
                            display: true,
                            position: 'left',
                            title: {
                                display: true,
                                text: 'Online',
                                // Add 3D effect to axis title
                                color: 'rgba(255, 255, 255, 0.9)',
                                font: {
                                    size: 12,
                                    weight: 'bold'
                                }
                            },
                            min: 0,
                            // 3D grid lines
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)',
                                tickColor: 'rgba(255, 255, 255, 0.2)',
                                lineWidth: 1
                            },
                            ticks: {
                                color: 'rgba(255, 255, 255, 0.8)'
                            }
                        },
                        y1: {
                            type: 'linear',
                            display: true,
                            position: 'right',
                            title: {
                                display: true,
                                text: 'CPU % / Memory (GB)',
                                // Add 3D effect to axis title
                                color: 'rgba(255, 255, 255, 0.9)',
                                font: {
                                    size: 12,
                                    weight: 'bold'
                                }
                            },
                            grid: {
                                drawOnChartArea: false,
                                color: 'rgba(255, 255, 255, 0.1)',
                                tickColor: 'rgba(255, 255, 255, 0.2)',
                                lineWidth: 1
                            },
                            ticks: {
                                color: 'rgba(255, 255, 255, 0.8)'
                            }
                        }
                    },
                    // Add 3D lighting effects
                    elements: {
                        point: {
                            hoverBackgroundColor: 'rgba(255, 255, 255, 0.9)',
                            hoverBorderWidth: 2
                        },
                        line: {
                            borderWidth: 3,
                            borderCapStyle: 'round',
                            borderJoinStyle: 'round',
                            // Add drop shadow for 3D effect
                            borderDashOffset: 0,
                            tension: 0.4
                        }
                    }
                }
            });

            // Store chart reference
            switch(chartId) {
                case 'ilias':
                    iliasChart = newChart;
                    init3DChart(canvasId, historyData);
                    break;
                case 'niilo':
                    niiloChart = newChart;
                    init3DChart(canvasId, historyData);
                    break;
                case 'bgstpoelten':
                    bgstpoeltenChart = newChart;
                    init3DChart(canvasId, historyData);
                    break;
                case 'htlstp':
                    htlstpChart = newChart;
                    init3DChart(canvasId, historyData);
                    break;
                case 'borgstpoelten':
                    borgstpoeltenChart = newChart;
                    init3DChart(canvasId, historyData);
                    break;
                case 'hakstpoelten':
                    hakstpoeltenChart = newChart;
                    init3DChart(canvasId, historyData);
                    break;
                case 'basopbafepstp':
                    basopbafepstpChart = newChart;
                    init3DChart(canvasId, historyData);
                    break;
                case 'play':
                    playChart = newChart;
                    init3DChart(canvasId, historyData);
                    break;
            }
        }

        // Function to load installed datapacks for all servers
        async function loadInstalledDatapacks() {
            try {
                // Load datapacks for mc-ilias
                const iliasResponse = await fetch('/api/public/datapacks/mc-ilias');
                const iliasData = await iliasResponse.json();
                displayDatapacks('ilias', iliasData.datapacks);
            } catch (error) {
                console.error('Error loading mc-ilias datapacks:', error);
                document.getElementById('ilias-datapacks-list').innerHTML = '<p>Error loading datapacks</p>';
            }

            try {
                // Load datapacks for mc-niilo
                const niiloResponse = await fetch('/api/public/datapacks/mc-niilo');
                const niiloData = await niiloResponse.json();
                displayDatapacks('niilo', niiloData.datapacks);
            } catch (error) {
                console.error('Error loading mc-niilo datapacks:', error);
                document.getElementById('niilo-datapacks-list').innerHTML = '<p>Error loading datapacks</p>';
            }

            try {
                // Load datapacks for bgstpoelten
                const bgstpoeltenResponse = await fetch('/api/public/datapacks/mc-bgstpoelten');
                const bgstpoeltenData = await bgstpoeltenResponse.json();
                displayDatapacks('bgstpoelten', bgstpoeltenData.datapacks);
            } catch (error) {
                console.error('Error loading bgstpoelten datapacks:', error);
                document.getElementById('bgstpoelten-datapacks-list').innerHTML = '<p>Error loading datapacks</p>';
            }

            try {
                // Load datapacks for htlstp
                const htlstpResponse = await fetch('/api/public/datapacks/mc-htlstp');
                const htlstpData = await htlstpResponse.json();
                displayDatapacks('htlstp', htlstpData.datapacks);
            } catch (error) {
                console.error('Error loading htlstp datapacks:', error);
                document.getElementById('htlstp-datapacks-list').innerHTML = '<p>Error loading datapacks</p>';
            }

            try {
                // Load datapacks for borgstpoelten
                const borgstpoeltenResponse = await fetch('/api/public/datapacks/mc-borgstpoelten');
                const borgstpoeltenData = await borgstpoeltenResponse.json();
                displayDatapacks('borgstpoelten', borgstpoeltenData.datapacks);
            } catch (error) {
                console.error('Error loading borgstpoelten datapacks:', error);
                document.getElementById('borgstpoelten-datapacks-list').innerHTML = '<p>Error loading datapacks</p>';
            }

            try {
                // Load datapacks for hakstpoelten
                const hakstpoeltenResponse = await fetch('/api/public/datapacks/mc-hakstpoelten');
                const hakstpoeltenData = await hakstpoeltenResponse.json();
                displayDatapacks('hakstpoelten', hakstpoeltenData.datapacks);
            } catch (error) {
                console.error('Error loading hakstpoelten datapacks:', error);
                document.getElementById('hakstpoelten-datapacks-list').innerHTML = '<p>Error loading datapacks</p>';
            }

            try {
                // Load datapacks for basopbafepstp
                const basopbafepstpResponse = await fetch('/api/public/datapacks/mc-basop-bafep-stp');
                const basopbafepstpData = await basopbafepstpResponse.json();
                displayDatapacks('basopbafepstp', basopbafepstpData.datapacks);
            } catch (error) {
                console.error('Error loading basopbafepstp datapacks:', error);
                document.getElementById('basopbafepstp-datapacks-list').innerHTML = '<p>Error loading datapacks</p>';
            }

            try {
                // Load datapacks for play
                const playResponse = await fetch('/api/public/datapacks/mc-play');
                const playData = await playResponse.json();
                displayDatapacks('play', playData.datapacks);
            } catch (error) {
                console.error('Error loading play datapacks:', error);
                document.getElementById('play-datapacks-list').innerHTML = '<p>Error loading datapacks</p>';
            }
        }

        // Function to display datapacks in the UI
        function displayDatapacks(server, datapacks) {
            const containerId = `${server}-datapacks-list`;
            const container = document.getElementById(containerId);

            if (datapacks && datapacks.length > 0) {
                const datapacksHtml = datapacks.map(dp => `
                    <span class="datapack-tag" style="display: inline-block; background: rgba(52, 152, 219, 0.3); padding: 6px 12px; margin: 4px; border-radius: 20px; font-size: 0.9em; border: 1px solid rgba(52, 152, 219, 0.5);">
                        <strong>${dp.name}</strong> (${dp.version})
                    </span>
                `).join('');

                container.innerHTML = `<div class="datapacks-container" style="display: flex; flex-wrap: wrap; gap: 5px;">${datapacksHtml}</div>`;
            } else {
                container.innerHTML = '<p>No datapacks installed</p>';
            }
        }

        // Refresh stats function
        function refreshStats() {
            updateStats();
            loadHistoricalData();
            loadInstalledDatapacks(); // Also refresh datapacks
        }

        // Initial load
        updateStats();
        loadHistoricalData();
        loadInstalledDatapacks(); // Load installed datapacks

        // Refresh data every 30 seconds
        setInterval(updateStats, 30000);

        // Refresh history every 60 seconds
        setInterval(loadHistoricalData, 60000);

        // Refresh installed datapacks every 3 minutes
        setInterval(loadInstalledDatapacks, 180000);

        // Initialize 3D charts if needed
        function init3DChart(canvasId, historyData) {
            const container = document.getElementById(canvasId).parentElement;
            if (!container) return;

            // Create a canvas element for the 3D chart
            const threeDContainer = document.createElement('div');
            threeDContainer.style.position = 'relative';
            threeDContainer.style.width = '100%';
            threeDContainer.style.height = '100%';
            threeDContainer.style.display = 'none'; // Initially hidden

            // Add a toggle button to switch between 2D and 3D
            const toggleBtn = document.createElement('button');
            toggleBtn.textContent = '3D View';
            toggleBtn.style.position = 'absolute';
            toggleBtn.style.top = '10px';
            toggleBtn.style.right = '10px';
            toggleBtn.style.zIndex = '10';
            toggleBtn.style.background = 'rgba(0, 0, 0, 0.7)';
            toggleBtn.style.color = 'white';
            toggleBtn.style.border = '1px solid rgba(255, 255, 255, 0.3)';
            toggleBtn.style.borderRadius = '4px';
            toggleBtn.style.padding = '5px 10px';
            toggleBtn.style.cursor = 'pointer';
            toggleBtn.onclick = function() {
                const canvas2D = document.getElementById(canvasId);
                const is2DVisible = canvas2D.style.display !== 'none';

                if (is2DVisible) {
                    canvas2D.style.display = 'none';
                    if (threeDContainer.children.length === 0) {
                        create3DChart(threeDContainer, historyData, canvasId);
                    }
                    threeDContainer.style.display = 'block';
                    toggleBtn.textContent = '2D View';
                } else {
                    canvas2D.style.display = 'block';
                    threeDContainer.style.display = 'none';
                    toggleBtn.textContent = '3D View';
                }
            };

            container.appendChild(toggleBtn);
            container.appendChild(threeDContainer);
        }

        // Function to create a 3D chart using Three.js
        function create3DChart(container, historyData, canvasId) {
            // Clear any existing content
            container.innerHTML = '';

            // Create canvas element for Three.js
            const canvas = document.createElement('canvas');
            canvas.style.width = '100%';
            canvas.style.height = '100%';
            canvas.id = canvasId + '-3d';
            container.appendChild(canvas);

            // Initialize Three.js scene
            const scene = new THREE.Scene();
            scene.background = new THREE.Color(0x000022);

            const camera = new THREE.PerspectiveCamera(
                75,
                container.clientWidth / container.clientHeight,
                0.1,
                1000
            );

            const renderer = new THREE.WebGLRenderer({
                canvas: canvas,
                antialias: true,
                alpha: true
            });
            renderer.setSize(container.clientWidth, container.clientHeight);

            // Add some lights for 3D effect
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
            scene.add(ambientLight);

            const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
            directionalLight.position.set(1, 1, 2);
            scene.add(directionalLight);

            // Position the camera for better viewing angle
            camera.position.z = 20;
            camera.position.y = 12;
            camera.position.x = 10;
            camera.lookAt(0, 0, 0);

            // Process the history data for 3D representation
            if (historyData && historyData.length > 0) {
                // Sort by timestamp to ensure proper order
                historyData.sort((a, b) => a.timestamp - b.timestamp);

                // Filter data to last 24 hours only
                const now = new Date();
                const twentyFourHoursAgo = new Date(now.getTime() - (24 * 60 * 60 * 1000));

                // Extract values for 3D charting
                const timestamps = [];
                const playerCounts = [];
                const cpuUsage = [];
                const memoryUsage = [];

                // Filter and sample data to reduce frequency
                const filteredData = [];
                historyData.forEach(dataPoint => {
                    const dataTime = new Date(dataPoint.timestamp);

                    // Only include data from the last 24 hours
                    if (dataTime >= twentyFourHoursAgo) {
                        filteredData.push(dataPoint);
                    }
                });

                // Sample the data to reduce frequency - keep every nth point
                // Ensure we have between 8 and 24 points for optimal visualization
                const maxPoints = 24;
                const minPoints = 8;
                let samplingRate = 1;

                if (filteredData.length > maxPoints) {
                    samplingRate = Math.ceil(filteredData.length / maxPoints);
                } else if (filteredData.length > minPoints) {
                    samplingRate = Math.ceil(filteredData.length / 16); // Intermediate value
                }

                for (let i = 0; i < filteredData.length; i += samplingRate) {
                    const dataPoint = filteredData[i];
                    const dataTime = new Date(dataPoint.timestamp);

                    // Convert timestamp to human-readable format
                    const date = new Date(dataPoint.timestamp);
                    timestamps.push(date.toLocaleTimeString());

                    // Extract player count
                    playerCounts.push(dataPoint.playerCount || 0);

                    // Extract CPU usage (remove % symbol)
                    let cpu = dataPoint.cpu || '0%';
                    if (typeof cpu === 'string') {
                        cpu = parseFloat(cpu.replace('%', '')) || 0;
                    }
                    cpuUsage.push(cpu);

                    // Extract Memory usage
                    let memory = dataPoint.memory || '0GB';
                    const memoryMatch = memory.match(/([\d.]+)G/);
                    if (memoryMatch) {
                        memory = parseFloat(memoryMatch[1]);
                    } else if (typeof memory === 'string') {
                        memory = 0;
                    }
                    memoryUsage.push(memory);
                }

                // Create 3D lines for each metric
                const createLine = (data, color, zOffset) => {
                    if (data.length < 2) return null;

                    const points = [];
                    const maxVal = Math.max(...data) || 1;

                    for (let i = 0; i < data.length; i++) {
                        const x = (i / (data.length - 1)) * 15 - 7.5; // Spread across X axis (time)
                        const y = (data[i] / maxVal) * 5; // Normalize to Y axis (value)
                        const z = zOffset; // Z position to separate different metrics
                        points.push(new THREE.Vector3(x, y, z));
                    }

                    const geometry = new THREE.BufferGeometry().setFromPoints(points);
                    // Use a material that's more visible in 3D
                    const material = new THREE.LineBasicMaterial({
                        color: color,
                        linewidth: 4,
                        transparent: true,
                        opacity: 0.9
                    });
                    const line = new THREE.Line(geometry, material);
                    return line;
                };

                // Create lines for each metric - positioned in 3D space
                const playerLine = createLine(playerCounts, 0x3498db, -6); // Blue for players
                const cpuLine = createLine(cpuUsage, 0xe74c3c, 0);        // Red for CPU
                const memoryLine = createLine(memoryUsage, 0x2ecc71, 6); // Green for memory

                if (playerLine) scene.add(playerLine);
                if (cpuLine) scene.add(cpuLine);
                if (memoryLine) scene.add(memoryLine);

                // Add grid lines for better visualization
                const gridHelper = new THREE.GridHelper(20, 20, 0x444444, 0x222222);
                gridHelper.rotation.x = Math.PI / 2; // Rotate to be horizontal
                scene.add(gridHelper);

                // Add axes helpers for reference
                const axesHelper = new THREE.AxesHelper(12);
                scene.add(axesHelper);

                // Add small indicators for each metric to make them clearly visible
                if (playerCounts.length > 0) {
                    const playerIndicator = new THREE.Mesh(
                        new THREE.SphereGeometry(0.3, 16, 16),
                        new THREE.MeshBasicMaterial({ color: 0x3498db })
                    );
                    playerIndicator.position.set(9, playerCounts[playerCounts.length - 1] / (Math.max(...playerCounts, 1) || 1) * 5, -6);
                    scene.add(playerIndicator);
                }

                if (cpuUsage.length > 0) {
                    const cpuIndicator = new THREE.Mesh(
                        new THREE.SphereGeometry(0.3, 16, 16),
                        new THREE.MeshBasicMaterial({ color: 0xe74c3c })
                    );
                    cpuIndicator.position.set(9, cpuUsage[cpuUsage.length - 1] / (Math.max(...cpuUsage, 1) || 1) * 5, 0);
                    scene.add(cpuIndicator);
                }

                if (memoryUsage.length > 0) {
                    const memoryIndicator = new THREE.Mesh(
                        new THREE.SphereGeometry(0.3, 16, 16),
                        new THREE.MeshBasicMaterial({ color: 0x2ecc71 })
                    );
                    memoryIndicator.position.set(9, memoryUsage[memoryUsage.length - 1] / (Math.max(...memoryUsage, 1) || 1) * 5, 6);
                    scene.add(memoryIndicator);
                }
            }

            // Animation loop for the 3D chart
            const animate = function() {
                requestAnimationFrame(animate);

                // Add subtle rotation for visual appeal - slower rotation
                camera.position.y = 10 * Math.sin(Date.now() * 0.0005); // Gentle vertical movement
                scene.rotation.y += 0.0005;
                scene.rotation.x = Math.PI / 7; // Gentle angle to view the 3D data

                renderer.render(scene, camera);
            };

            animate();

            // Handle window resize
            window.addEventListener('resize', function() {
                camera.aspect = container.clientWidth / container.clientHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(container.clientWidth, container.clientHeight);
            });
        }
    </script>
</body>
</html>